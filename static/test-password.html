<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å¯†ç å¯¼å…¥æµ‹è¯•</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
      }
      .test-section h3 {
        margin-top: 0;
        color: #333;
      }
      .result {
        background: #f5f5f5;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
        font-family: monospace;
        white-space: pre-wrap;
      }
      .success {
        color: green;
      }
      .error {
        color: red;
      }
      button {
        padding: 10px 20px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background: #5568d3;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ” å¯†ç å¯¼å…¥åŠŸèƒ½æµ‹è¯•</h1>

    <div class="test-section">
      <h3>æµ‹è¯• 1: è§£æè¾“å…¥æ ¼å¼</h3>
      <p>æµ‹è¯•å­—ç¬¦ä¸²è§£ææ˜¯å¦æ­£ç¡®æå–å¯†ç </p>
      <button onclick="test1()">è¿è¡Œæµ‹è¯•</button>
      <div id="test1-result" class="result"></div>
    </div>

    <div class="test-section">
      <h3>æµ‹è¯• 2: HTML dataå±æ€§è®¾ç½®</h3>
      <p>æµ‹è¯•å¯†ç æ˜¯å¦æ­£ç¡®è®¾ç½®åˆ°checkboxçš„data-passwordå±æ€§</p>
      <button onclick="test2()">è¿è¡Œæµ‹è¯•</button>
      <div id="test2-result" class="result"></div>
    </div>

    <div class="test-section">
      <h3>æµ‹è¯• 3: ä»checkboxè¯»å–å¯†ç </h3>
      <p>æµ‹è¯•æ˜¯å¦èƒ½ä»checkboxçš„datasetä¸­è¯»å–å¯†ç </p>
      <button onclick="test3()">è¿è¡Œæµ‹è¯•</button>
      <div id="test3-result" class="result"></div>
    </div>

    <div class="test-section">
      <h3>æµ‹è¯• 4: å®Œæ•´æµç¨‹æ¨¡æ‹Ÿ</h3>
      <p>æ¨¡æ‹Ÿä»è¾“å…¥åˆ°å¯¼å…¥çš„å®Œæ•´æµç¨‹</p>
      <button onclick="test4()">è¿è¡Œæµ‹è¯•</button>
      <div id="test4-result" class="result"></div>
    </div>

    <script>
      // æµ‹è¯•1: è§£æè¾“å…¥æ ¼å¼
      function test1() {
        const testInput =
          "test@outlook.com----MyPassword123----client-id-123----refresh-token-456";
        const parts = testInput.split("----").map((p) => p.trim());

        const result = {
          è¾“å…¥: testInput,
          åˆ†å‰²ç»“æœ: parts,
          å­—æ®µæ•°é‡: parts.length,
          é‚®ç®±: parts[0],
          å¯†ç : parts[1],
          å®¢æˆ·ç«¯ID: parts[2],
          åˆ·æ–°ä»¤ç‰Œ: parts[3],
          å¯†ç é•¿åº¦: parts[1]?.length || 0,
          æµ‹è¯•ç»“æœ:
            parts.length === 4 && parts[1] === "MyPassword123"
              ? "âœ… é€šè¿‡"
              : "âŒ å¤±è´¥",
        };

        document.getElementById("test1-result").innerHTML = JSON.stringify(
          result,
          null,
          2
        );
      }

      // æµ‹è¯•2: HTML dataå±æ€§è®¾ç½®
      function test2() {
        const testPassword = "MyPassword123";
        const testEmail = "test@outlook.com";

        // åˆ›å»ºä¸€ä¸ªcheckboxå¹¶è®¾ç½®dataå±æ€§
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.setAttribute("data-email", testEmail);
        checkbox.setAttribute("data-password", testPassword);

        const result = {
          è®¾ç½®çš„å¯†ç : testPassword,
          getAttributeè¯»å–: checkbox.getAttribute("data-password"),
          datasetè¯»å–: checkbox.dataset.password,
          ä¸¤è€…æ˜¯å¦ç›¸ç­‰:
            checkbox.getAttribute("data-password") ===
            checkbox.dataset.password,
          æµ‹è¯•ç»“æœ:
            checkbox.dataset.password === testPassword ? "âœ… é€šè¿‡" : "âŒ å¤±è´¥",
        };

        document.getElementById("test2-result").innerHTML = JSON.stringify(
          result,
          null,
          2
        );
      }

      // æµ‹è¯•3: ä»checkboxè¯»å–å¯†ç 
      function test3() {
        const container = document.createElement("div");
        container.innerHTML = `
                <input type="checkbox" 
                       class="test-checkbox" 
                       data-email="test@outlook.com" 
                       data-password="MyPassword123"
                       data-refresh-token="token123"
                       data-client-id="client123">
            `;

        const checkbox = container.querySelector(".test-checkbox");

        const account = {
          email: checkbox.dataset.email,
          password: checkbox.dataset.password || "",
          refresh_token: checkbox.dataset.refreshToken,
          client_id: checkbox.dataset.clientId,
        };

        const result = {
          checkboxçš„dataset: checkbox.dataset,
          æå–çš„è´¦æˆ·ä¿¡æ¯: account,
          å¯†ç æ˜¯å¦æ­£ç¡®: account.password === "MyPassword123",
          æµ‹è¯•ç»“æœ:
            account.password === "MyPassword123" ? "âœ… é€šè¿‡" : "âŒ å¤±è´¥",
        };

        document.getElementById("test3-result").innerHTML = JSON.stringify(
          result,
          null,
          2
        );
      }

      // æµ‹è¯•4: å®Œæ•´æµç¨‹æ¨¡æ‹Ÿ
      function test4() {
        const steps = [];

        // æ­¥éª¤1: è§£æè¾“å…¥
        const input =
          "test@outlook.com----MyPassword123----client-id-123----refresh-token-456";
        const parts = input.split("----").map((p) => p.trim());
        const [email, password, clientId, refreshToken] = parts;

        steps.push({
          æ­¥éª¤: "1. è§£æè¾“å…¥",
          å¯†ç : password,
          å¯†ç é•¿åº¦: password.length,
        });

        // æ­¥éª¤2: æ„å»ºè´¦æˆ·å¯¹è±¡ï¼ˆæ¨¡æ‹Ÿåç«¯è¿”å›ï¼‰
        const mockResult = {
          email: email,
          status: "success",
          credentials: {
            email: email,
            password: password,
            refresh_token: refreshToken,
            client_id: clientId,
          },
        };

        steps.push({
          æ­¥éª¤: "2. åç«¯è¿”å›",
          å¯†ç : mockResult.credentials.password,
          å¯†ç é•¿åº¦: mockResult.credentials.password.length,
        });

        // æ­¥éª¤3: æ¸²æŸ“åˆ°HTMLï¼ˆæ¨¡æ‹Ÿï¼‰
        const container = document.createElement("div");
        const passwordAttr = mockResult.credentials.password || "";
        container.innerHTML = `
                <input type="checkbox" 
                       class="test-checkbox" 
                       data-email="${mockResult.email}"
                       data-password="${passwordAttr}"
                       data-refresh-token="${mockResult.credentials.refresh_token}"
                       data-client-id="${mockResult.credentials.client_id}">
            `;

        const checkbox = container.querySelector(".test-checkbox");

        steps.push({
          æ­¥éª¤: "3. HTMLæ¸²æŸ“",
          "data-passwordå±æ€§": checkbox.getAttribute("data-password"),
          "dataset.password": checkbox.dataset.password,
          å¯†ç é•¿åº¦: checkbox.dataset.password?.length || 0,
        });

        // æ­¥éª¤4: è¯»å–å¹¶æ„å»ºå¯¼å…¥æ•°æ®
        const importAccount = {
          email: checkbox.dataset.email,
          password: checkbox.dataset.password || "",
          refresh_token: checkbox.dataset.refreshToken,
          client_id: checkbox.dataset.clientId,
        };

        steps.push({
          æ­¥éª¤: "4. å¯¼å…¥æ•°æ®",
          å¯†ç : importAccount.password,
          å¯†ç é•¿åº¦: importAccount.password.length,
          æœ€ç»ˆæµ‹è¯•ç»“æœ:
            importAccount.password === "MyPassword123"
              ? "âœ… å®Œæ•´æµç¨‹é€šè¿‡"
              : "âŒ æµç¨‹å¤±è´¥",
        });

        document.getElementById("test4-result").innerHTML = JSON.stringify(
          steps,
          null,
          2
        );
      }
    </script>
  </body>
</html>
